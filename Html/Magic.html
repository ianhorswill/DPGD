
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- generic metadata -->
	<title>Magic</title>
	<meta name="author" content="Ian Horswill">
	<meta name="description" content="An introduction to declarative programming with applications to vidoegames">
	<meta name="generator" content="Booker">

	<!-- seo helpers: generic, twitter, facebook/opengraph -->
	<meta itemprop="name" content="Magic">
	<meta name="twitter:title" content="Magic">
	<meta property="og:title" content="Magic" />
	<meta property="og:type" content="article" />
	<meta property="og:site_name" content="Declarative Programming for Game Designers" />
	
	<!-- stylesheets -->
	<!-- bootstrap needs to come first -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

	<!-- then our style sheet -->
	<link rel="stylesheet" href="site.css"> 

	<!-- sample fonts, please feel free to replace with your preferred ones -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat|Public+Sans:400,700&display=swap&subset=latin-ext"> 

	<!-- highlightjs is used for source code formatting inside <code> tags. feel free to remove it. -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/styles/atom-one-dark.min.css">
	<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/highlight.min.js"></script>
	<script src="step.min.js"></script>
	<script>hljs.highlightAll();</script>
	
	<!-- use MathJax for latex rendering -->
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

	<!-- Use mermaid to render diagrams -->
	<script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'dark' });
    </script>
</head>

<body>
<div class="container-fluid shadow header">
	<h1 style="text-align: right;">Incomplete draft: do not cite!</h1>

	<div class="container">
		<div class="col-10 col-md-8 header-contents">
				<a class="backgroundlink" href="Part_I.html"> Part I </a>
&nbsp;&#x25BB;&nbsp;				<a class="backgroundlink" href="Clairvoyant_programming.html"> Clairvoyant programming </a>
&nbsp;&#x25BB;&nbsp;				<a class="backgroundlink" href="Logic_programming.html"> Simple logic programs </a>
			<h1><a class="simplelink" href="index.html">Magic</a></h1>
		</div>
	</div>
</div>

	<!-- Make clicking On Step code pop up a step interpreter and copy the code into the clipboard -->
	<script>
	document.querySelector("body").addEventListener('click', function(e) {
		var element = e.target.closest('code');
		if(element !== null && element.classList.contains('language-Step')) {
			var interp = window.open("https://ianhorswill.github.io/WebStep", "step");
			var handler = function(e) { 
				console.log(e.data);
				interp.postMessage(element.textContent, "*");
				window.removeEventListener('message', handler);
			};
			window.addEventListener('message', handler);
		}
	}, false);
	</script>



<div class="container-fluid">
	<div class="row justify-content-center">
		<div class="col-md-7 index-contents">

			<div class="container shadow blog-contents">

<p>The magic of logic programming comes when we use multiple calls to ask complex questions.</p>
<p>Let's look at a slightly more complex example of our dog and cat example.  First, let's add some more information to our cats and dogs example.  We're just going to add an extra cat (<code>acoustic_kitty</code><a id="fnref:1" href="#fn:1" class="footnote-ref"><sup>1</sup></a>), a human (<code>jason_bourne</code>) and declared them both to be spies:</p>
<pre><code class="language-Step"># Try: [Animal ?who] [Spy ?who] 
[predicate]
Dog benji.
Dog lassie.

[predicate]
Cat morris.
Cat garfield.
Cat acoustic_kitty.

[predicate]
Animal ?x: [Dog ?x]
Animal ?x: [Cat ?x]

[predicate]
Human jason_bourne.

[predicate]
Spy acoustic_kitty.
Spy jason_bourne.
</code></pre>
<p>If we query <code>[Animal ?who] [Spy ?who]</code> against the code above, it will run <code>[Animal ?who]</code>, and then run <code>[Spy ?who]</code>.  A variable can only have one value, so the only way this can work is if it finds a value for <code>?who</code> that is both an animal <em>and</em> a spy.  There's only one spy animal in the database, so it reports <code>?who=acoustic_kitty</code>.  Try it now (click the code to open it in Step).</p>
<h2 id="sequences-of-calls-mean-and">Sequences of calls mean &ldquo;and&rdquo;</h2>
<p>Just as <code>[Animal ?who]</code> effectively means &ldquo;find me an animal&rdquo; and <code>[Spy ?who]</code> effectively means &ldquo;find me a spy&rdquo;, the sequence <code>[Animal ?who] [Spy ?who]</code> effectively means &ldquo;find me someone who is an animal <strong>and</strong> a spy.&rdquo;</p>
<h2 id="the-laws-of-magic">The laws of magic</h2>
<p>Classical logic programming languages make two guarantees to you: if you ask it to find values of variables and it succeeds, then the values it gives you are correct.  And subject to some fine print, if it fails, then there are no correct values to be found.</p>
<p>For the moment, <em>how</em> it finds these is irrelvant.  As a programmer, you get to assume it will find them if they exist.</p>
<h3 id="the-fine-print-technical">The fine print (technical)</h3>
<p>Here's the full version with the fine print:</p>
<ul>
<li><strong>Soundness</strong>: if a program succeeds and reports values for its variables, then every call in the program works with those values.  For example,
if you run <code>[A ?x] [B ?x] [C ?x]</code>, etc. and it reports <code>?x=7</code>, then <code>[A 7]</code>, <code>[B 7]</code>, and <code>[C 7]</code> are all true.</li>
<li><strong>Completeness</strong>: for simple programs,<a id="fnref:2" href="#fn:2" class="footnote-ref"><sup>2</sup></a> if there's a set of values you that will make the query work, it will find one.</li>
</ul>
<h2 id="endnotes">Endnotes</h2>
<div class="footnotes">
<hr />
<ol>
<li id="fn:1">
<p><a href="https://en.wikipedia.org/wiki/Acoustic_Kitty">Acoustic Kitty</a> was a 1960s CIA program to use cats to spy on the soviets.  It worked as well as you would imagine.<a href="#fnref:1" class="footnote-back-ref">&#8617;</a></p>
</li>
<li id="fn:2">
<p><em>Esoteric</em>: as you might have guessed, the phrase &ldquo;for simple programs&rdquo; is doing a lot of work here.  A program is simple in this sense if it doesn't use recursion, and only calls predicates defined by methods.  Such a program is called a <strong>definite</strong> program.  Improperly written recursions can cause it to miss answers that would make it work if the recursions were written properly.  And there are a number of  &ldquo;primitive&rdquo; predicates that are written in C# rather than through methods.  Many of these do not give completeness guarantees, and so anything that calls them isn't guaranteed complete.  The really problematic one here is that the <code>Not</code> primitive, used for asking when something is false, is not complete.  There were literally 30 years of Ph.D. disserations on trying to deal with the recalcitrance of <code>Not</code>.<a href="#fnref:2" class="footnote-back-ref">&#8617;</a></p>
</li>
</ol>
</div>




			</div>

		</div>

		<div class="col-md-3">

<div class="container-fluid sidebar">
			<h5>Simple logic programs</h5>
			<ol>
					<li><a class="backgroundlink" href="Predicates.html" id="section_page_1"> Predicates </a> <br></li>
					<li><a class="backgroundlink" href="Asking_questions.html" id="section_page_2"> Asking questions of predicates </a> <br></li>
					<li><a class="backgroundlink" href="Inference.html" id="section_page_3"> Inference </a> <br></li>
					<li><a class="simplelink" href="Magic.html" id="section_page_4"> <b> Magic </b> </a> <br></li>
					<li><a class="backgroundlink" href="Clairvoyance.html" id="section_page_5"> A deeper magic: clairvoyance </a> <br></li>
					<li><a class="backgroundlink" href="Under_the_hood.html" id="section_page_6"> Under the hood (technical) </a> <br></li>
			</ol>
	<script>
		document.addEventListener('keyup', function(e) {
			if (e.key >= '1' && e.key <= '9') document.getElementById('section_page_'+e.key).click()
		}, false);
	</script>
	</p>
	<br>
	<h5>Navigation: (click or use arrow keys)</h5>
	<p>
			<a class="simplelink" id="NextPage" href="Clairvoyance.html"><b>Next:</b> Clairvoyance</a><br>
			<script>
				document.addEventListener('keyup', function(e) { if (e.key == 'ArrowRight' || e.key == "Return") document.getElementById('NextPage').click()}, false);
			</script>
			<a class="simplelink" id="PreviousPage" href="Inference.html"><b>Previous:</b> Inference</a><br>
			<script>
				document.addEventListener('keyup', function(e) { if (e.key == 'ArrowLeft') document.getElementById('PreviousPage').click()}, false);
			</script>
			<a class="simplelink" id="UpPage" href="Logic_programming.html"><b>Up:</b> Simple logic programs</a><br>
			<script>
				document.addEventListener('keyup', function(e) { if (e.key == 'ArrowUp') document.getElementById('UpPage').click()}, false);
			</script>
	</p>
</div>

		</div>
	</div>
</div>



<div class="container-fluid footer">
	<div class="container">
		<div class="row">
			<div class="col-10 col-lg-8 footer-contents">
				<div class="text-muted">
					<h4><a class="simplelink" href="index.html">Declarative Programming for Game Designers</a></h4>

					Copyright &copy; 2025 Ian Horswill
				</div>
				<div class="text-muted">
					<a href="https://github.com/rzubek/mies">Made by Booker, based on Rob Zubek's Mies (Crown Theme)</a>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	document.querySelectorAll('.language-step').forEach(e => {e.title = 'Click here to try the code'; });
</script>

<!-- this is required for bootstrap -->

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

</body>
</html>



