
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- generic metadata -->
	<title>Okay, it&#x27;s not magic</title>
	<meta name="author" content="Ian Horswill">
	<meta name="description" content="An introduction to declarative programming with applications to vidoegames">
	<meta name="generator" content="Mies">

	<!-- seo helpers: generic, twitter, facebook/opengraph -->
	<meta itemprop="name" content="Okay, it&#x27;s not magic">
	<meta name="twitter:title" content="Okay, it&#x27;s not magic">
	<meta property="og:title" content="Okay, it&#x27;s not magic" />
	<meta property="og:type" content="article" />
	<meta property="og:site_name" content="Declarative Programming for Game Designers" />
	
	<!-- stylesheets -->
	<!-- bootstrap needs to come first -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

	<!-- then our style sheet -->
	<link rel="stylesheet" href="site.css"> 

	<!-- sample fonts, please feel free to replace with your preferred ones -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat|Public+Sans:400,700&display=swap&subset=latin-ext"> 

	<!-- highlightjs is used for source code formatting inside <code> tags. feel free to remove it. -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/styles/atom-one-dark.min.css">
	<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/highlight.min.js"></script>
	<script src="step.min.js"></script>
	<script>hljs.highlightAll();</script>
	
	<!-- use MathJax for latex rendering -->
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

	<!-- Use mermaid to render diagrams -->
	<script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'dark' });
    </script>
</head>

<body>
<div class="container-fluid shadow header">
	<div class="container">
		<div class="col-10 col-md-8 header-contents">
				<a class="backgroundlink" href="Part_I.html"> Part I </a>
&nbsp;&#x25BB;&nbsp;				<a class="backgroundlink" href="Logic_programming.html"> Logic programming </a>
			<h1><a class="simplelink" href="index.html">Okay, it&#x27;s not magic</a></h1>
		</div>
	</div>
</div>

	<!-- Make clicking On Step code pop up a step interpreter and copy the code into the clipboard -->
	<script>
	document.querySelector("body").addEventListener('click', function(e) {
		var element = e.target.closest('code');
		if(element !== null && element.classList.contains('language-Step')) {
			var interp = window.open("https://ianhorswill.github.io/WebStep", "step");
			var handler = function(e) { 
				console.log(e.data);
				interp.postMessage(element.textContent, "*");
				window.removeEventListener('message', handler);
			};
			window.addEventListener('message', handler);
		}
	}, false);
	</script>



<div class="container-fluid">
	<div class="row justify-content-center">
		<div class="col-md-7 index-contents">

			<div class="container shadow blog-contents">

<p>Note to non-programmers: you may want to skip this.</p>
<p>Again, here's our cats, dogs, and spies example:</p>
<pre><code class="language-step">[predicate]
Dog benji.
Dog lassie.

[predicate]
Cat morris.
Cat garfield.
Cat acoustic_kitty.

[predicate]
Animal ?x: [Dog ?x]
Animal ?x: [Cat ?x]

[predicate]
Human jason_bourne.

[predicate]
Spy acoustic_kitty.
Spy jason_bourne.
</code></pre>
<h2 id="predicates-can-have-many-solutions">Predicates can have many solutions</h2>
<p>Normal tasks can only succeed; failure is an error.  Predicates are special in that they're allowed to fail.  But they're also special in that they're allowed to <strong>succeed more than once</strong>.  The call <code>[Dog ?x]</code> has two different solutions: <code>benji</code> and <code>lassie</code>.  The call <code>[Cat ?x]</code> has <code>morris</code>, <code>garfield</code>, and <code>acoustic_kitty</code>.  And the call <code>[Animal ?x]</code> has all five: <code>benji</code>, <code>lassie</code>,<code>morris</code>, <code>garfield</code>, and <code>acoustic_kitty</code>.</p>
<p>Predicates only find one solution at a time.  So when we call <code>[Dog ?x]</code>, we get <code>?x=benji</code> as we said.  But the predicate remembers where it left off, so that if it needs to find an alternate solution, it can continue executing.</p>
<h2 id="chained-calls-are-nested-loop">Chained calls are nested loop</h2>
<p>When we run:</p>
<pre><code class="language-step">[Animal ?who] [Spy ?who] 
</code></pre>
<p>It really means:</p>
<ul>
<li>For each solution to <code>[Animal ?who]</code>
<ul>
<li>Check if <code>[Spy ?who]</code>
<ul>
<li>If so, succeed</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>It gets run as nested loops.</p>
<h2 id="backtracking">Backtracking</h2>
<p>it really tries each solution to the first call, until it finds a solution to the second.  So the internal execution looks like this:</p>
<ul>
<li>Run <code>[Animal ?who]</code>
<ul>
<li>Animal tries its first method
<ul>
<li>That method runs <code>[Dog ?who]</code>
<ul>
<li><code>Dog</code> succeeds with <code>?who=benji</code></li>
<li>So <code>Animal</code> succeeds with <code>?who=benji</code>
<ul>
<li>Run <code>[Spy benji]</code>
<ul>
<li>That fails</li>
</ul>
</li>
</ul>
</li>
<li>Restart <code>[Animal ?who]</code>, which restarts <code>Dog</code></li>
<li>It picks up where it left off, giving us <code>?who=lassie</code>
<ul>
<li>Run <code>[Spy lassie]</code>, it fails again</li>
</ul>
</li>
<li>Restart <code>[Animal ?who]</code>, which restarts <code>Dog</code>
<ul>
<li><code>Dog</code> has run out of methods, so it fails</li>
</ul>
</li>
</ul>
</li>
<li>So <code>Animal</code>'s first method fails</li>
</ul>
</li>
<li>Animal tries its second method
<ul>
<li>That method runs <code>[Cat ?who]</code>
<ul>
<li><code>Cat</code> succeeds with <code>?who=morris</code></li>
<li>So <code>Animal</code> succeeds with <code>?who=morris</code>
<ul>
<li>Run <code>[Spy morris]</code>
<ul>
<li>That fails</li>
</ul>
</li>
</ul>
</li>
<li>Restart <code>Animal</code>, which restarts <code>Cat</code>, which yields <code>?who=garfield</code>, which also doesn't work</li>
<li>Restart <code>Animal</code>, which restarts <code>Cat</code>, which yields <code>?who=acoustic_kitty</code>
<ul>
<li>Run <code>[Spy acoustic_kitty]</code>
<ul>
<li>Success!</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>




			</div>

		</div>

		<div class="col-md-3">

<div class="container-fluid sidebar">
			<h5>Logic programming</h5>
			<ol>
					<li><a class="backgroundlink" href="Predicates.html" id="section_page_1"> Predicates </a> <br></li>
					<li><a class="backgroundlink" href="Magic.html" id="section_page_2"> Magic </a> <br></li>
					<li><a class="simplelink" href="Behind_the_magic.html" id="section_page_3"> <b> Okay, it&#x27;s not magic </b> </a> <br></li>
					<li><a class="backgroundlink" href="The_matching_process_in_detail.html" id="section_page_4"> The matching process in detail </a> <br></li>
			</ol>
	<script>
		document.addEventListener('keyup', function(e) {
			if (e.key >= '1' && e.key <= '9') document.getElementById('section_page_'+e.key).click()
		}, false);
	</script>
	</p>
	<br>
	<h5>Navigation: (click or use arrow keys)</h5>
	<p>
			<a class="simplelink" id="NextPage" href="The_matching_process_in_detail.html"><b>Next:</b> The matching process in detail</a><br>
			<script>
				document.addEventListener('keyup', function(e) { if (e.key == 'ArrowRight' || e.key == "Return") document.getElementById('NextPage').click()}, false);
			</script>
			<a class="simplelink" id="PreviousPage" href="Magic.html"><b>Previous:</b> Magic</a><br>
			<script>
				document.addEventListener('keyup', function(e) { if (e.key == 'ArrowLeft') document.getElementById('PreviousPage').click()}, false);
			</script>
			<a class="simplelink" id="UpPage" href="Logic_programming.html"><b>Up:</b> Logic programming</a><br>
			<script>
				document.addEventListener('keyup', function(e) { if (e.key == 'ArrowUp') document.getElementById('UpPage').click()}, false);
			</script>
	</p>
</div>

		</div>
	</div>
</div>



<div class="container-fluid footer">
	<div class="container">
		<div class="row">
			<div class="col-10 col-lg-8 footer-contents">
				<div class="text-muted">
					<h4><a class="simplelink" href="index.html">Declarative Programming for Game Designers</a></h4>

					Copyright &copy; 2025 Ian Horswill
				</div>
				<div class="text-muted">
					<a href="https://github.com/rzubek/mies">Made by Booker, based on Rob Zubek's Mies (Crown Theme)</a>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	document.querySelectorAll('.language-step').forEach(e => {e.title = 'Click here to try the code'; });
</script>

<!-- this is required for bootstrap -->

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

</body>
</html>



