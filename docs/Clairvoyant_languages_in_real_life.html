
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- generic metadata -->
	<title>Clairvoyant languages in real life&#xA;</title>
	<meta name="author" content="Ian Horswill">
	<meta name="description" content="An introduction to declarative programming with applications to vidoegames">
	<meta name="generator" content="Booker">

	<!-- seo helpers: generic, twitter, facebook/opengraph -->
	<meta itemprop="name" content="Clairvoyant languages in real life&#xA;">
	<meta name="twitter:title" content="Clairvoyant languages in real life&#xA;">
	<meta property="og:title" content="Clairvoyant languages in real life&#xA;" />
	<meta property="og:type" content="article" />
	<meta property="og:site_name" content="Declarative Programming for Game Designers" />
	
	<!-- stylesheets -->
	<!-- bootstrap needs to come first -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

	<!-- then our style sheet -->
	<link rel="stylesheet" href="site.css"> 

	<!-- sample fonts, please feel free to replace with your preferred ones -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat|Public+Sans:400,700&display=swap&subset=latin-ext"> 

	<!-- highlightjs is used for source code formatting inside <code> tags. feel free to remove it. -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/styles/atom-one-dark.min.css">
	<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/highlight.min.js"></script>
	<script src="step.js"></script>
	<script src="NDScript.js"></script>
	<script>hljs.highlightAll();</script>
	
	<!-- use MathJax for latex rendering -->
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

	<!-- Use mermaid to render diagrams -->
	<script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'dark' });
    </script>
</head>

<body>
<div class="container-fluid shadow header">
	<h1 style="text-align: right;">Incomplete draft: do not cite!</h1>

	<div class="container">
		<div class="col-md-7 header-contents">
				<a class="backgroundlink" href="Part_I.html"> Part I
 </a>
&nbsp;&#x25BB;&nbsp;				<a class="backgroundlink" href="Clairvoyant_programming.html"> Clairvoyant programming
 </a>
&nbsp;&#x25BB;&nbsp;				<a class="backgroundlink" href="NDScript.html"> Clairvoyant algorithms
 </a>
			<h1><a id="linkToIndex" class="simplelink" href="index.html">Clairvoyant languages in real life
</a></h1>
					<p>
					<span style="padding:.25rem; padding-left:.5rem; padding-right:.5rem; background-color:orange; color:black;">
					   alpha test
					</span>
					</p>
		</div>
	</div>
</div>

	<!-- Make clicking On Step code pop up a step interpreter and copy the code into the clipboard -->
	<script>
	document.querySelector("body").addEventListener('click', function(e) {
		var element = e.target.closest('code');
		if(element !== null) {
			if (element.classList.contains('language-Step')) {
				var interp = window.open("https://ianhorswill.github.io/StepSandbox", "Step sandbox");
				var handler = function(e) { 
					interp.postMessage(element.textContent, "*");
					window.removeEventListener('message', handler);
				};
				window.addEventListener('message', handler);
			} else if (element.classList.contains('language-NDScript')) {
				var interp = window.open("https://ianhorswill.github.io/NDScriptSandbox", "NDScript sandbox");
				var handler = function(e) { 
					interp.postMessage(element.textContent, "*");
					window.removeEventListener('message', handler);
				};
				window.addEventListener('message', handler);
			}
		}
	}, false);
	</script>



<div class="container-fluid">
	<div class="row justify-content-center">
		<div class="col-md-7 index-contents">

			<div class="container shadow blog-contents">

<p>We began with NDScript for two reasons.  First, it's a &ldquo;normal&rdquo; language with just <code>choose</code> and <code>fail</code> added to it.  So if you already know normal languages, there isn't a lot more to learn.  Second, the pseudocode for &ldquo;nondeterministic algorithms&rdquo; that often appeals in textbooks and the research literature basically looks like NDScript code.  So NDScript lets you try running them directly without having to convert them into deterministic search algorithms.  In <a href="Part_II.html">Part II</a>, we'll generally start by giving the nondeterministic version of an algorithm first and then discuss different strategies for converting it into a normal deterministic algorithm.  So learning reading code with <code>choose</code> and <code>fail</code> is valuable.</p>
<p>That said, it's difficult to find a language like NDScript in use in real life.  I'm guessing that's largely for implementation reasons.  It's hard to compile an optimized version of NDScript that's competitive with C.  Any time the program makes any kind of change (print statement, assignment statement, procedure call), the compiler has to be prepared for it to be backtracked.  That means it has to either save a new &ldquo;copy&rdquo; of the system state<a id="fnref:1" href="#fn:1" class="footnote-ref"><sup>1</sup></a> or keep a log of all the things that it has to undo if you backtrack<a id="fnref:2" href="#fn:2" class="footnote-ref"><sup>2</sup></a>.</p>
<p>We'll now move to <em>Step</em>, a much more powerful language that's more like the languages you see in real life.  It has clairvoyance, but no explicit <code>choose</code> operation.  Instead, it lets you specify multiple, redundant methods for a given task.  When you call a task, it clairvoyantly guesses the correct one to use.</p>
<p>But there are a lot of other things that are <em>also</em> different from &ldquo;normal&rdquo; languages, but that aren't directly related to clairvoyance:</p>
<ul>
<li>It can <strong>match</strong> expressions to other expressions.  For example, if you match the expression <code>[Color grass ?]</code> to the pattern <code>[Color grass green]</code>, the matching process assigns <code>green</code> to the variable <code>?</code>.</li>
<li>Matching is used for procedure calls.  When you call a task, it tries to match the arguments in the call to the arguments in the method.  It only tries methods that match.</li>
<li>Calls don't return values because the matching process lets you pass data in both directions (both inputs and outputs).  So the system doesn't prejudge what arguments are inputs or outputs.  On a good day, this lets you write code that can be run normally (specify inputs get output) or &ldquo;backwords&rdquo; (specify out, get the inputs that would generate it).</li>
<li>All of this pushes you toward a mostly functional style of programming.</li>
</ul>
<p>All this ends up being very useful for AI, but it's also why we didn't muddy the waters by starting with it.</p>
<p>Let's start it now.</p>
<h2 id="notes">Notes</h2>
<div class="footnotes">
<hr />
<ol>
<li id="fn:1">
<p>This is less awful than it sounds.  You use so-called <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.immutable">&ldquo;immutable&rdquo;</a> or &ldquo;functional&rdquo; data structures.  These avoid making a full copy, and you only pay an <span class="math">\(O(\log n)\)</span> cost for each update.  But that's still a lot more expensive than just writing memory directly.  This is the approach used in NDScript and Step.<a href="#fnref:1" class="footnote-back-ref">&#8617;</a></p>
</li>
<li id="fn:2">
<p>This is the implementation technique generally used in compiled logic programming languages.  It keeps a stack of things it needs to undo, called the <strong>trail</strong> and whenever it backtracks, it does the things specified on the trail.  That's a very efficient loop in logic programming because the only state change is giving a value to a previously undefined variable.  So the trail is just a stack of variables to un-define.<a href="#fnref:2" class="footnote-back-ref">&#8617;</a></p>
</li>
</ol>
</div>




			</div>

		</div>

		<div class="col-md-3">

<div class="container-fluid sidebar">
			<h5>Clairvoyant algorithms
</h5>
			<ol start="1">
					<li class="sidebar"><a class="backgroundlink" href="Pathfinding.html" id="section_page_1"> Finding paths
 </a> <br></li>
					<li class="sidebar"><a class="backgroundlink" href="NDScript_execution.html" id="section_page_2"> Execution
 </a> <br></li>
					<li class="sidebar"><a class="backgroundlink" href="Comparing_solutions.html" id="section_page_3"> Least-cost paths
 </a> <br></li>
					<li class="sidebar"><a class="backgroundlink" href="Map_generation.html" id="section_page_4"> Map generation
 </a> <br></li>
					<li class="sidebar"><a class="simplelink" href="Clairvoyant_languages_in_real_life.html" id="section_page_5"> <b> Clairvoyant languages in real life
 </b> </a> <br></li>
			</ol>
	<script>
		document.addEventListener('keyup', function(e) {
			if (e.key >= '1' && e.key <= '9') document.getElementById('section_page_'+e.key).click()
		}, false);
	</script>
	</p>
	<br>
	<h5>Navigation</h5>
	<p style="text-align: left;">
	<table style="border: none;">
			<tr style="border: none;">
				<td style="border: none; vertical-align: top;"> <b>Next:</b> </td>
				<td style="border: none;"> 
					<a title="Click or press &#8594;" class="simplelink" id="NextPage" href="The_Step_language.html">Step
</a><br>
				</td>
			</tr>
			<script>
				document.addEventListener('keyup', function(e) {
					if (e.getModifierState("Meta") || e.getModifierState("Control")) return
					if (e.key == 'ArrowRight' || e.key == "Return")
					  document.getElementById('NextPage').click()
				}, false);
			</script>
			<tr style="border: none;">
				<td style="border: none; vertical-align: top;"> <b>Previous:</b> </td>
				<td style="border: none;"> 
					<a title="Click or press &#8592;" class="simplelink" id="PreviousPage" href="WFC.html">Constraint-based maps in the game industry
</a><br>
				</td>
			</tr>
			<script>
				document.addEventListener('keyup', function(e) {
					if (e.getModifierState("Meta")) return
					if (e.key == 'ArrowLeft') 
						document.getElementById('PreviousPage').click()
				}, false);
			</script>
			<tr style="border: none;">
				<td style="border: none; vertical-align: top;"> <b>Up:</b> </td>
				<td style="border: none;"> 
					<a title="Click or press &#8593;" class="simplelink" id="UpPage" href="NDScript.html">Clairvoyant algorithms
</a><br>
				</td>
			</tr>
			<script>
				document.addEventListener('keyup', function(e) {
					if (e.getModifierState("Meta")) return
					if (e.key == 'ArrowUp') document.getElementById(e.getModifierState("Control")?'linkToIndex':'UpPage').click()
				}, false);
			</script>
			<tr style="border: none;">
				<td style="border: none; vertical-align: top;"><b>Next &sect;:</b></td>
				<td style="border: none;"> 
					<a title="Click or press Control-&#8594;" class="simplelink" id="NextSectionPage" href="The_Step_language.html">Step
</a><br>
				</td>
			</tr>
			<script>
				document.addEventListener('keyup', function(e) {
					if (e.getModifierState("Meta")) return
					if (e.key == 'ArrowRight'  && e.getModifierState("Control")) document.getElementById('NextSectionPage').click()
				}, false);
			</script>
	</table>
	</p>
	<div style="color: grey; padding-top: .5rem;">
		<a style="color: grey;" href="mailto:ian@northwestern.edu?subject=Comment on DPGD/Clairvoyant_languages_in_real_life.html">Send feedback on this page</a>
	</div>
</div>

		</div>
	</div>
</div>



<div class="container-fluid footer">
	<div class="container">
		<div class="row">
			<div class="col-10 col-lg-8 footer-contents">
				<div class="text-muted">
					<h4><a class="simplelink" href="index.html">Declarative Programming for Game Designers</a></h4>

					Copyright &copy; 2025 Ian Horswill
				</div>
				<div class="text-muted">
					<a href="https://github.com/rzubek/mies">Made by Booker, based on Rob Zubek's Mies (Crown Theme)</a>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	document.querySelectorAll('.language-step').forEach(e => {e.title = 'Click here to try the code'; });
</script>

<!-- this is required for bootstrap -->

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

</body>
</html>



