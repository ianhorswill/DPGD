
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- generic metadata -->
	<title>Visualizing predicates&#xA;</title>
	<meta name="author" content="Ian Horswill">
	<meta name="description" content="An introduction to declarative programming with applications to vidoegames">
	<meta name="generator" content="Booker">

	<!-- seo helpers: generic, twitter, facebook/opengraph -->
	<meta itemprop="name" content="Visualizing binary predicates&#xA;">
	<meta name="twitter:title" content="Visualizing binary predicates&#xA;">
	<meta property="og:title" content="Visualizing binary predicates&#xA;" />
	<meta property="og:type" content="article" />
	<meta property="og:site_name" content="Declarative Programming for Game Designers" />
	
	<!-- stylesheets -->
	<!-- bootstrap needs to come first -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

	<!-- then our style sheet -->
	<link rel="stylesheet" href="site.css"> 

	<!-- sample fonts, please feel free to replace with your preferred ones -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat|Public+Sans:400,700&display=swap&subset=latin-ext"> 

	<!-- highlightjs is used for source code formatting inside <code> tags. feel free to remove it. -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/styles/atom-one-dark.min.css">
	<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11/build/highlight.min.js"></script>
	<script src="step.js"></script>
	<script src="NDScript.js"></script>
	<script>hljs.highlightAll();</script>
	
	<!-- use MathJax for latex rendering -->
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

	<!-- Use mermaid to render diagrams -->
	<script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'dark' });
    </script>
</head>

<body>
<div class="container-fluid shadow header">
	<div class="container">
		<div class="col-md-7 header-contents">
				<a class="backgroundlink" href="Part_I.html"> Part I
 </a>
&nbsp;&#x25BB;&nbsp;				<a class="backgroundlink" href="Clairvoyant_programming.html"> Clairvoyant programming
 </a>
&nbsp;&#x25BB;&nbsp;				<a class="backgroundlink" href="The_Step_language.html"> Step
 </a>
&nbsp;&#x25BB;&nbsp;				<a class="backgroundlink" href="Logic_programming.html"> Simple logic programs
 </a>
			<h1><a id="linkToIndex" class="simplelink" href="index.html">Visualizing binary predicates
</a></h1>
					<p>
					<span style="padding:.25rem; padding-left:.5rem; padding-right:.5rem; background-color:orange; color:black;">
					   alpha test
					</span>
					</p>
		</div>
	</div>
</div>

	<!-- Make clicking On Step code pop up a step interpreter and copy the code into the clipboard -->
	<script>
	document.querySelector("body").addEventListener('click', function(e) {
		var element = e.target.closest('code');
		if(element !== null) {
			if (element.classList.contains('language-Step')) {
				var interp = window.open("https://ianhorswill.github.io/StepSandbox", "Step sandbox");
				var handler = function(e) { 
					interp.postMessage(element.textContent, "*");
					window.removeEventListener('message', handler);
				};
				window.addEventListener('message', handler);
			} else if (element.classList.contains('language-NDScript')) {
				var interp = window.open("https://ianhorswill.github.io/NDScriptSandbox", "NDScript sandbox");
				var handler = function(e) { 
					interp.postMessage(element.textContent, "*");
					window.removeEventListener('message', handler);
				};
				window.addEventListener('message', handler);
			}
		}
	}, false);
	</script>



<div class="container-fluid">
	<div class="row justify-content-center">
		<div class="col-md-7 index-contents">
			<div class="container shadow blog-contents">

<p>Predicates that take two parameters are sometimes called <em>binary predicates</em>.  A useful debugging tool for binary predicates is that we visualize them as <a href="Graphs.html">graphs</a>, i.e. networks of nodes with lines or arrows between them.  If <code>[Predicate a b]</code> is true, then we include <code>a</code> and <code>b</code> with an arrow from <code>a</code> to <code>b</code>.  For example, for our family example:</p>
<pre><code class="language-step">[predicate]
Siblings ?a ?b: [Parent ?a ?parent] [Parent ?b ?parent] [Different ?a ?b]

[predicate]
Parent bart marge.
Parent bart homer.
Parent lisa homer.
Parent lisa marge.
Parent stan sharon.
Parent stan randy.
Parent randy grandpa.
Parent jimbo grandpa.
</code></pre>
<p>The <code>Parent</code> predicate looks like this:</p>
<pre class="mermaid">graph TD
n0("bart") --> n1("marge")
n0 --> n2("homer")
n3("lisa") --> n2
n3 --> n1
n4("stan") --> n5("sharon")
n4 --> n6("randy")
n6 --> n7("grandpa")
n8("jimbo") --> n7
</pre>
<p>and the <code>Siblings</code> predicate looks like this:</p>
<pre class="mermaid">graph TD
n0("bart") --> n1("lisa")
n1 --> n0
n2("randy") --> n3("jimbo")
n3 --> n2
</pre>
<p>You can generate these visualizations yourself using the <code>VisualizeGraph</code> task.  Simply say <code>[VisualizeGraph ?predicate]</code>, where <code>?predicate</code> is some predicate that takes 2 arguments and it will draw the graph in your browser.  Try it out:</p>
<pre><code class="language-Step"># Try: [VisualizeGraph Parent]
[predicate]
Siblings ?a ?b: [Parent ?a ?parent] [Parent ?b ?parent] [Different ?a ?b]

[predicate]
Parent bart marge.
Parent bart homer.
Parent lisa homer.
Parent lisa marge.
Parent stan sharon.
Parent stan randy.
Parent randy grandpa.
Parent jimbo grandpa.
</code></pre>
<h2 id="unbound-variables-in-visualizations">Unbound variables in visualizations</h2>
<p>Returning to our food preferences example:</p>
<pre><code class="language-Step"># Try: [VisualizeGraph Likes]
[predicate]
Likes tanya sushi.
Likes tanya burgers.
Likes tanya mexican.
Likes jayden burgers.
Likes jayden ethiopean.
# Kimiko likes everything
Likes kimiko ?.
# Everyone likes pizza.
Likes ? pizza.
</code></pre>
<p>When we visualize it, we get the somewhat odd visualization:</p>
<pre class="mermaid">graph TD
n0("tanya") --> n1("sushi")
n0 --> n2("burgers")
n0 --> n3("mexican")
n4("jayden") --> n2
n4 --> n5("ethiopean")
n6("kimiko") --> n7("?endNode9")
n8("?startNode8") --> n9("pizza")
</pre>
<p>Where we have graph nodes like <code>?startNode8</code> and <code>?endNode9</code> that are variables rather than real values.  That's because of rules like:</p>
<pre><code class="language-step"># Kimiko likes everything
Likes kimiko ?.
</code></pre>
<p>which mean that when you ask for all solutions to <code>[Likes ?startNode ?endNode]</code>, which is what the graph visualizer does, one of the solutions you get is <code>?startNode = kimiko, ?endNode=?</code>, i.e. <code>?endNode</code> can be anything, i.e. &ldquo;Kimiko likes everything&rdquo;.  But of course, the intention isn't that Kimiko doesn't like <em>everything</em>.  Kimiko may not like nuclear war, for example.  The intention of the rule above means &ldquo;Kimiko likes all <em>foods</em>&rdquo; and so the variable there is intended only to be used with foods.  But the system doesn't have a list of all foods, so it doesn't know what to do with the variable and it just renders it as <code>?endNode9</code>.</p>
<p>We can fix this buy giving it explicit generators for the set of characters and the set of foods.  We can say that someone is a character if they like something and food if it's liked by someone:</p>
<pre><code class="language-step">[predicate]
Character ?who: [Likes ?who ?] [NonVar ?who]
[predicate]
Food ?what: [Likes ? ?what] [NonVar ?what]
</code></pre>
<p>The <a href="Testing_binding_status.html"><code>NonVar</code></a> predicate, which we'll talk about later, says only to accept the result if <code>?who</code> has a value.  That filters out the results from the <code>Likes</code> rules that have <code>?</code>s in them.</p>
<p>Then we can have a version of <code>Likes</code> that never returns variables in its queries:</p>
<pre><code class="language-step">[predicate]
LikesExhaustive ?who ?what: [Likes ?who ?what] [Character ?who] [Food ?what]
</code></pre>
<p>And then we get the full visualization:</p>
<pre class="mermaid">graph TD
n0("tanya") --> n1("sushi")
n0 --> n2("burgers")
n0 --> n3("mexican")
n4("jayden") --> n2
n4 --> n5("ethiopean")
n6("kimiko") --> n1
n6 --> n2
n6 --> n3
n6 --> n5
n6 --> n7("pizza")
n0 --> n7
n4 --> n7
</pre>
<p>This is &ldquo;better&rdquo; in the sense that it explicitly shows all combinations of who liking what.  But it's also a mess, so you might prefer the version with variables.</p>
<p>You can try it out:</p>
<pre><code class="language-Step"># Try: [VisualizeGraph LikesExhaustive]
[predicate]
Likes tanya sushi.
Likes tanya burgers.
Likes tanya mexican.
Likes jayden burgers.
Likes jayden ethiopean.
# Kimiko likes everything
Likes kimiko ?.
# Everyone likes pizza.
Likes ? pizza.

[predicate]
Character ?who: [Likes ?who ?] [NonVar ?who]
[predicate]
Food ?what: [Likes ? ?what] [NonVar ?what]
[predicate]
LikesExhaustive ?who ?what: [Likes ?who ?what] [Character ?who] [Food ?what]
</code></pre>


<table style="border: none; width: 100%; table-layout: fixed; margin-top: 2rem;">
<tbody>
<tr style="border: none;">
				<td style="border: none; vertical-align: top; "> 
                    <b>Previous:</b> 
					<a title="Click or press &#8592;" class="simplelink" id="PreviousPage" href="Piblings.html">Piblings: aunts and uncles
</a><br>
				</td>
				<td style="border: none; vertical-align: top; text-align: right;"> 
                    <b>Next:</b>  
					<a title="Click or press &#8594;" class="simplelink" id="NextPage" href="Taxonomies.html">Taxonomies
</a><br>
				</td>			
</tr>
</tbody>
</table>
			</div>
		</div>

		<div class="col-md-3">

<div class="container-fluid sidebar">
		<h3 style="text-align: right;">Incomplete draft:<br>do not cite!</h3>
			<h5>Simple logic programs
</h5>
			<ol start="1">
					<li class="sidebar"><a class="backgroundlink" href="Predicates.html" id="section_page_1"> Predicates
 </a> <br></li>
					<li class="sidebar"><a class="backgroundlink" href="Answering_questions.html" id="section_page_2"> Predicates answer questions
 </a> <br></li>
					<li class="sidebar"><a class="backgroundlink" href="Complex_questions.html" id="section_page_3"> Building complex questions
 </a> <br></li>
					<li class="sidebar"><a class="backgroundlink" href="Inference.html" id="section_page_4"> Inference
 </a> <br></li>
					<li class="sidebar"><a class="simplelink" href="Visualizing_predicates.html" id="section_page_5"> <b> Visualizing binary predicates
 </b> </a> <br></li>
					<li class="sidebar"><a class="backgroundlink" href="Taxonomies.html" id="section_page_6"> Taxonomies
 </a> <br></li>
					<li class="sidebar"><a class="backgroundlink" href="Self-referential_rules.html" id="section_page_7"> Self-referential rules
 </a> <br></li>
			</ol>
	<script>
		document.addEventListener('keyup', function(e) {
			if (e.key >= '1' && e.key <= '9') document.getElementById('section_page_'+e.key).click()
		}, false);
	</script>
	</p>
	<br>
	<h5>Navigation</h5>
	<p style="text-align: left;">
	<table style="border: none;">
			<tr style="border: none;">
				<td style="border: none; vertical-align: top;"> <b>Next:</b> </td>
				<td style="border: none;"> 
					<a title="Click or press &#8594;" class="simplelink" id="NextPage" href="Taxonomies.html">Taxonomies
</a><br>
				</td>
			</tr>
			<script>
				document.addEventListener('keyup', function(e) {
					if (e.getModifierState("Meta") || e.getModifierState("Control")) return
					if (e.key == 'ArrowRight' || e.key == "Return")
					  document.getElementById('NextPage').click()
				}, false);
			</script>
			<tr style="border: none;">
				<td style="border: none; vertical-align: top;"> <b>Previous:</b> </td>
				<td style="border: none;"> 
					<a title="Click or press &#8592;" class="simplelink" id="PreviousPage" href="Piblings.html">Piblings: aunts and uncles
</a><br>
				</td>
			</tr>
			<script>
				document.addEventListener('keyup', function(e) {
					if (e.getModifierState("Meta")) return
					if (e.key == 'ArrowLeft') 
						document.getElementById('PreviousPage').click()
				}, false);
			</script>
			<tr style="border: none;">
				<td style="border: none; vertical-align: top;"> <b>Up:</b> </td>
				<td style="border: none;"> 
					<a title="Click or press &#8593;" class="simplelink" id="UpPage" href="Logic_programming.html">Simple logic programs
</a><br>
				</td>
			</tr>
			<script>
				document.addEventListener('keyup', function(e) {
					if (e.getModifierState("Meta")) return
					if (e.key == 'ArrowUp') document.getElementById(e.getModifierState("Control")?'linkToIndex':'UpPage').click()
				}, false);
			</script>
			<tr style="border: none;">
				<td style="border: none; vertical-align: top;"><b>Next &sect;:</b></td>
				<td style="border: none;"> 
					<a title="Click or press Control-&#8594;" class="simplelink" id="NextSectionPage" href="Starflight_PCG.html">PCG in Starflight
</a><br>
				</td>
			</tr>
			<script>
				document.addEventListener('keyup', function(e) {
					if (e.getModifierState("Meta")) return
					if (e.key == 'ArrowRight'  && e.getModifierState("Control")) document.getElementById('NextSectionPage').click()
				}, false);
			</script>
			<tr style="border: none;">
				<td style="border: none; vertical-align: top;"><b>Prev &sect;:</b></td>
				<td style="border: none;"> 
					<a title="Click or press Control-&#8592;" class="simplelink" id="PreviousSectionPage" href="Parameterized_grammars.html">Parameterized grammars
</a><br>
				</td>
			</tr>
			<script>
				document.addEventListener('keyup', function(e) {
					if (e.getModifierState("Meta")) return
					if (e.key == 'ArrowLeft'  && e.getModifierState("Control")) document.getElementById('PreviousSectionPage').click()
				}, false);
			</script>
	</table>
	</p>
	<div style="color: grey; padding-top: .5rem;">
		<a style="color: grey;" href="mailto:ian@northwestern.edu?subject=Comment on DPGD/Visualizing_predicates.html">Send feedback on this page</a>
	</div>
</div>

		</div>
	</div>
</div>



<div class="container-fluid footer">
	<div class="container">
		<div class="row">
			<div class="col-10 col-lg-8 footer-contents">
				<div class="text-muted">
					<h4><a class="simplelink" href="index.html">Declarative Programming for Game Designers</a></h4>

					Copyright &copy; 2025 Ian Horswill
				</div>
				<div class="text-muted">
					<a href="https://github.com/rzubek/mies">Made by Booker, based on Rob Zubek's Mies (Crown Theme)</a>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	document.querySelectorAll('.language-step').forEach(e => {e.title = 'Click here to try the code'; });
</script>

<!-- this is required for bootstrap -->

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

</body>
</html>
